# è¿ç§»æŒ‡å— - ä» 0.14.x åˆ° 0.15.0

æœ¬æ–‡æ¡£æŒ‡å¯¼æ‚¨ä» open-lark 0.14.x ç‰ˆæœ¬å‡çº§åˆ° 0.15.0 ç‰ˆæœ¬ã€‚0.15.0 ç‰ˆæœ¬å¼•å…¥äº†é‡å¤§çš„å¤šcrateæ¶æ„é‡æ„ï¼Œéœ€è¦ä¸€äº›è¿ç§»å·¥ä½œã€‚

## ğŸ—ï¸ ä¸»è¦å˜æ›´

### å¤šCrateæ¶æ„é‡æ„

**0.15.0 ç‰ˆæœ¬æœ€é‡å¤§çš„å˜åŒ–æ˜¯ä»å•ä½“åº“é‡æ„ä¸ºå¤šcrate workspaceæ¶æ„ï¼š**

```
open-lark/
â”œâ”€â”€ Cargo.toml (workspace root)
â”œâ”€â”€ open-lark/ (ä¸»SDKåº“)
â”‚   â”œâ”€â”€ Cargo.toml (ä¾èµ– open-lark-core)
â”‚   â””â”€â”€ src/
â”œâ”€â”€ open-lark-core/ (æ ¸å¿ƒåº“)
â”‚   â”œâ”€â”€ Cargo.toml (ç‹¬ç«‹å‘å¸ƒ)
â”‚   â””â”€â”€ src/
â””â”€â”€ scripts/ (éªŒè¯å’Œå·¥å…·è„šæœ¬)
```

### åŠŸèƒ½æ¨¡å—åŒ–æ”¹è¿›

- âœ… **æ›´å¥½çš„æ¨¡å—åŒ–ç¼–è¯‘** - åªç¼–è¯‘æ‚¨ä½¿ç”¨çš„åŠŸèƒ½æ¨¡å—
- âœ… **å‡å°‘äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°** - é€šè¿‡æ¡ä»¶ç¼–è¯‘ä¼˜åŒ–
- âœ… **æ›´æ¸…æ™°çš„ä¾èµ–å…³ç³»** - æ ¸å¿ƒåŠŸèƒ½ä¸åº”ç”¨åŠŸèƒ½åˆ†ç¦»
- âœ… **æ›´å¿«çš„æ„å»ºæ—¶é—´** - workspaceçº§åˆ«çš„å¢é‡ç¼–è¯‘

### æ–‡æ¡£æ•°æ®é€æ˜åŒ–

- ğŸ“Š **å‡†ç¡®çš„APIç»Ÿè®¡æ•°æ®** - 1,134ä¸ªAPIæ–¹æ³•ï¼Œ86.3%è¦†ç›–ç‡
- ğŸ“‹ **é€æ˜çš„å®ç°çŠ¶æ€** - å››çº§åˆ†ç±»ä½“ç³»æ˜ç¡®å±•ç¤ºæ¯ä¸ªæ¨¡å—çŠ¶æ€
- ğŸ¯ **æ¸…æ™°çš„å‘å±•è·¯çº¿å›¾** - è¯¦ç»†çš„æ”¹è¿›è®¡åˆ’å’Œä¼˜å…ˆçº§æŒ‡å¯¼

## ğŸ“‹ è¿ç§»æ­¥éª¤

### 1. æ›´æ–°ä¾èµ–é…ç½®

**å¦‚æœæ‚¨ä½¿ç”¨ Cargo.tomlï¼š**

```toml
# æ—§ç‰ˆæœ¬ (0.14.x)
[dependencies]
open-lark = "0.14"

# æ–°ç‰ˆæœ¬ (0.15.0)
[dependencies]
open-lark = "0.15"
```

**å¦‚æœæ‚¨éœ€è¦æ ¸å¿ƒåº“çš„ç‰¹å®šåŠŸèƒ½ï¼š**

```toml
[dependencies]
open-lark = "0.15"
open-lark-core = "0.15"  # å¯é€‰ï¼Œåªæœ‰éœ€è¦ç›´æ¥è®¿é—®æ ¸å¿ƒåŠŸèƒ½æ—¶æ‰éœ€è¦
```

### 2. åŠŸèƒ½æ ‡å¿—æ›´æ–°

**é»˜è®¤åŠŸèƒ½ä¿æŒä¸å˜ï¼š**

```toml
[dependencies]
open-lark = { version = "0.15", features = ["default"] }
# default = ["im", "cloud-docs", "contact", "group", "authentication", "search"]
```

**æ–°å¢åŠŸèƒ½æ ‡å¿—æ”¯æŒï¼š**

```toml
# å®Œæ•´åŠŸèƒ½ï¼ˆè¾ƒå¤§äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰
open-lark = { version = "0.15", features = ["full"] }

# è‡ªå®šä¹‰åŠŸèƒ½ç»„åˆ
open-lark = { version = "0.15", features = ["im", "contact", "approval"] }

# æœ€å°åŒ–é…ç½®
open-lark = { version = "0.15", features = ["im", "authentication"] }
```

### 3. ä»£ç å…¼å®¹æ€§

**å¥½æ¶ˆæ¯ï¼š** 0.15.0 ç‰ˆæœ¬ä¿æŒäº† **100% çš„APIå…¼å®¹æ€§**ï¼æ‚¨ç°æœ‰çš„ä»£ç æ— éœ€ä¿®æ”¹ã€‚

```rust
// è¿™äº›ä»£ç åœ¨ 0.14.x å’Œ 0.15.0 ä¸­å®Œå…¨ç›¸åŒ
use open_lark::prelude::*;

let client = LarkClient::builder("app_id", "app_secret")
    .with_app_type(AppType::SelfBuild)
    .build();

let response = client
    .contact
    .v3
    .user
    .create_user_builder()
    .user(user)
    .user_id_type("open_id")
    .execute(&client.contact.v3.user)
    .await?;
```

### 4. æ„å»ºé…ç½®æ›´æ–°

**å¦‚æœæ‚¨ä½¿ç”¨ just æ„å»ºå·¥å…·ï¼š**

```bash
# ç°æœ‰çš„å‘½ä»¤ä¿æŒä¸å˜
just build
just test
just docs
just check-all
```

**å¦‚æœæ‚¨ä½¿ç”¨ cargo å‘½ä»¤ï¼š**

```bash
# æ–°å¢workspaceæ”¯æŒ
cargo build --workspace  # æ„å»ºæ‰€æœ‰crate
cargo test --workspace   # æµ‹è¯•æ‰€æœ‰crate
```

## ğŸ”§ å¸¸è§è¿ç§»åœºæ™¯

### åœºæ™¯1ï¼šåŸºæœ¬åº”ç”¨è¿ç§»

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
cargo update open-lark --to-version 0.15.0

# 2. éªŒè¯ç¼–è¯‘
cargo check

# 3. è¿è¡Œæµ‹è¯•
cargo test

# 4. ä¸€åˆ‡æ­£å¸¸ï¼æ— éœ€ä»£ç ä¿®æ”¹
```

### åœºæ™¯2ï¼šè‡ªå®šä¹‰åŠŸèƒ½é…ç½®

```bash
# 1. æ£€æŸ¥å½“å‰ä½¿ç”¨çš„åŠŸèƒ½
cargo tree | grep open-lark

# 2. æ›´æ–°Cargo.tomlä¸­çš„åŠŸèƒ½é…ç½®
# ç¡®ä¿åŒ…å«æ‚¨éœ€è¦çš„æ‰€æœ‰åŠŸèƒ½æ ‡å¿—

# 3. éªŒè¯ç‰¹å®šåŠŸèƒ½ç¼–è¯‘
cargo check --features your-custom-features
```

### åœºæ™¯3ï¼šå¤§å‹é¡¹ç›®è¿ç§»

```bash
# 1. åˆ›å»ºæ–°çš„åˆ†æ”¯
git checkout -b upgrade-to-0.15.0

# 2. æ›´æ–°ä¾èµ–
# æ›´æ–°æ‰€æœ‰workspaceæˆå‘˜çš„Cargo.tomlæ–‡ä»¶

# 3. æ¸è¿›å¼æµ‹è¯•
# å…ˆæµ‹è¯•åŸºç¡€åŠŸèƒ½ï¼Œå†æµ‹è¯•å¤æ‚åŠŸèƒ½

# 4. æ€§èƒ½éªŒè¯
# æ¯”è¾ƒæ„å»ºæ—¶é—´å’ŒäºŒè¿›åˆ¶æ–‡ä»¶å¤§å°
```

## ğŸ“Š æ€§èƒ½æ”¹è¿›

### æ„å»ºæ—¶é—´ä¼˜åŒ–

- **å¢é‡ç¼–è¯‘** - workspaceçº§åˆ«çš„ä¾èµ–ç¼“å­˜
- **å¹¶è¡Œæ„å»º** - å¤šcrateå¹¶è¡Œç¼–è¯‘
- **æ¡ä»¶ç¼–è¯‘** - åªç¼–è¯‘ä½¿ç”¨çš„åŠŸèƒ½æ¨¡å—

### äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°

é€šè¿‡åŠŸèƒ½æ ‡å¿—ä¼˜åŒ–ï¼Œæ‚¨å¯ä»¥æ˜¾è‘—å‡å°‘æœ€ç»ˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ï¼š

```bash
# å®Œæ•´åŠŸèƒ½ï¼š~50MB
cargo build --release --all-features

# åŸºæœ¬åŠŸèƒ½ï¼š~15MB
cargo build --release --features="im,contact,authentication"

# æœ€å°é…ç½®ï¼š~8MB
cargo build --release --features="im"
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. åŠŸèƒ½æ ‡å¿—å¿…éœ€

åœ¨ 0.15.0 ä¸­ï¼ŒæŸäº›åŠŸèƒ½ç°åœ¨éœ€è¦æ˜ç¡®çš„åŠŸèƒ½æ ‡å¿—ï¼š

```rust
// ç¡®ä¿åœ¨ Cargo.toml ä¸­å¯ç”¨æ‰€éœ€åŠŸèƒ½
[dependencies]
open-lark = { version = "0.15", features = ["im", "contact"] }
```

### 2. æ–‡æ¡£æ›´æ–°

æŸ¥çœ‹æ›´æ–°åçš„æ–‡æ¡£ä»¥äº†è§£å‡†ç¡®çš„APIè¦†ç›–ç‡å’Œå®ç°çŠ¶æ€ï¼š

- [APIè¦†ç›–ç‡æŠ¥å‘Š](docs/API_COVERAGE_REPORT.md)
- [å¾…å®ç°æ¨¡å—æ¸…å•](docs/PENDING_MODULES.md)
- [é¡¹ç›®æ–‡æ¡£æ›´æ–°æ‘˜è¦](docs/DOCUMENTATION_UPDATE_SUMMARY.md)

### 3. é”™è¯¯å¤„ç†æ”¹è¿›

å¦‚æœæ‚¨ä¹‹å‰ä½¿ç”¨äº†é”™è¯¯å¤„ç†çš„å†…éƒ¨APIï¼Œå¯èƒ½éœ€è¦æ›´æ–°ï¼š

```rust
// 0.14.x
use open_lark::core::error::LarkAPIError;

// 0.15.0 (æ¨è)
use open_lark::prelude::*;  // ç»Ÿä¸€çš„å¯¼å‡º
```

## ğŸ†˜ æ•…éšœæ’é™¤

### ç¼–è¯‘é”™è¯¯

**é—®é¢˜ï¼š** `could not find 'v1' in 'im'`

**è§£å†³æ–¹æ¡ˆï¼š** ç¡®ä¿å¯ç”¨äº†ç›¸åº”çš„åŠŸèƒ½æ ‡å¿—

```toml
[dependencies]
open-lark = { version = "0.15", features = ["im"] }
```

**é—®é¢˜ï¼š** åŠŸèƒ½æ‰¾ä¸åˆ°

**è§£å†³æ–¹æ¡ˆï¼š** æ£€æŸ¥åŠŸèƒ½æ ‡å¿—é…ç½®

```bash
# æŸ¥çœ‹å¯ç”¨åŠŸèƒ½
cargo search open-lark

# æ£€æŸ¥å½“å‰é…ç½®
cargo tree | grep open-lark
```

### è¿è¡Œæ—¶é”™è¯¯

**é—®é¢˜ï¼š** æŸäº›APIè°ƒç”¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š** æ£€æŸ¥APIå®ç°çŠ¶æ€

```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
./scripts/verify_api_stats.sh

# æŸ¥çœ‹å¾…å®ç°æ¨¡å—
cat docs/PENDING_MODULES.md
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœåœ¨è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£** - [å®Œæ•´çš„æ–‡æ¡£æ›´æ–°æ‘˜è¦](docs/DOCUMENTATION_UPDATE_SUMMARY.md)
2. **è¿è¡ŒéªŒè¯è„šæœ¬** - `./scripts/verify_api_stats.sh`
3. **æ£€æŸ¥GitHub Issues** - [é¡¹ç›®Issuesé¡µé¢](https://github.com/foxzool/open-lark/issues)
4. **åˆ›å»ºæ–°Issue** - è¯¦ç»†æè¿°æ‚¨çš„è¿ç§»é—®é¢˜

## ğŸ¯ è¿ç§»æ£€æŸ¥æ¸…å•

- [ ] æ›´æ–° Cargo.toml ä¸­çš„ç‰ˆæœ¬å·
- [ ] ç¡®è®¤æ‰€éœ€çš„åŠŸèƒ½æ ‡å¿—å·²å¯ç”¨
- [ ] è¿è¡Œ `cargo check` éªŒè¯ç¼–è¯‘
- [ ] è¿è¡Œ `cargo test` éªŒè¯æµ‹è¯•
- [ ] æ£€æŸ¥APIè¦†ç›–ç‡æŠ¥å‘Šäº†è§£åŠŸèƒ½çŠ¶æ€
- [ ] éªŒè¯æ„å»ºæ—¶é—´æœ‰æ‰€æ”¹å–„
- [ ] ç¡®è®¤äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ç¬¦åˆé¢„æœŸ

---

**æ­å–œï¼** å®Œæˆè¿™äº›æ­¥éª¤åï¼Œæ‚¨å°±æˆåŠŸè¿ç§»åˆ°äº† open-lark 0.15.0 ç‰ˆæœ¬ï¼Œå¯ä»¥äº«å—å¤šcrateæ¶æ„å¸¦æ¥çš„æ‰€æœ‰æ”¹è¿›äº†ï¼