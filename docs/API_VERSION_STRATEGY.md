# API ç‰ˆæœ¬æ¼”è¿›ç­–ç•¥ä¸æˆç†Ÿåº¦æ ‡æ³¨

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**ç”Ÿæˆæ—¶é—´**: 2025-09-06  
**é€‚ç”¨èŒƒå›´**: open-lark v0.13.2+  

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº† open-lark SDK çš„ API ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­–ç•¥ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬æ¼”è¿›è§„åˆ™ã€API æˆç†Ÿåº¦æ ‡æ³¨ç³»ç»Ÿä»¥åŠå‘åå…¼å®¹æ€§ä¿è¯ã€‚

---

## ğŸ¯ ç‰ˆæœ¬æ¼”è¿›ç­–ç•¥

### 1. ç‰ˆæœ¬åˆ†ç±»

#### 1.1 é£ä¹¦ API ç‰ˆæœ¬æ˜ å°„
```
v1 -> ç¨³å®šç‰ˆæœ¬ (é•¿æœŸæ”¯æŒ)
v2 -> ç¨³å®šç‰ˆæœ¬ (å½“å‰ä¸»æ¨)  
v3 -> æœ€æ–°ç‰ˆæœ¬ (åŠŸèƒ½å®Œå–„ä¸­)
v4+ -> å®éªŒç‰ˆæœ¬ (åŠŸèƒ½é¢„è§ˆ)
```

#### 1.2 SDK ç‰ˆæœ¬æ”¯æŒçŸ©é˜µ

| SDKç‰ˆæœ¬ | é£ä¹¦APIæ”¯æŒ | æ”¯æŒçŠ¶æ€ | ç”Ÿå‘½å‘¨æœŸ |
|---------|------------|----------|----------|
| v1.x | v1, v2 | ç»´æŠ¤æ¨¡å¼ | 2025-12æ­¢ |
| v2.x | v2, v3 | æ´»è·ƒå¼€å‘ | å½“å‰ç‰ˆæœ¬ |
| v3.x | v3, v4+ | è®¡åˆ’ä¸­ | 2025å¹´åº• |

### 2. ç‰ˆæœ¬å¼ƒç”¨æµç¨‹

#### 2.1 å¼ƒç”¨æ—¶é—´è¡¨
```
é€šçŸ¥æœŸ -> 6ä¸ªæœˆ
è¿‡æ¸¡æœŸ -> 3ä¸ªæœˆ  
å¼ƒç”¨æœŸ -> 3ä¸ªæœˆ
ç§»é™¤æ—¶é—´ -> 12ä¸ªæœˆå
```

#### 2.2 å¼ƒç”¨æ ‡è®°
```rust
#[deprecated(
    since = "0.14.0",
    note = "Use v2::create_message instead. Will be removed in v1.0.0"
)]
pub fn create_message_v1() -> CreateMessageRequestBuilder {
    // ...
}
```

---

## ğŸ·ï¸ API æˆç†Ÿåº¦æ ‡æ³¨ç³»ç»Ÿ

### 1. æˆç†Ÿåº¦ç­‰çº§

#### ğŸŸ¢ Stable (ç¨³å®š)
- **å®šä¹‰**: ç”Ÿäº§å¯ç”¨ï¼Œå‘åå…¼å®¹ä¿è¯
- **æ ‡å‡†**: 
  - æµ‹è¯•è¦†ç›–ç‡ > 80%
  - æ–‡æ¡£å®Œæ•´ï¼Œç¤ºä¾‹é½å…¨
  - åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯ > 6ä¸ªæœˆ
  - æ— å·²çŸ¥é‡å¤§ bug

#### ğŸŸ¡ Beta (æµ‹è¯•)
- **å®šä¹‰**: åŠŸèƒ½å®Œæ•´ï¼ŒAPI å¯èƒ½å¾®è°ƒ
- **æ ‡å‡†**:
  - æµ‹è¯•è¦†ç›–ç‡ > 60%  
  - æ–‡æ¡£åŸºæœ¬å®Œæ•´
  - ç¤¾åŒºåé¦ˆ > 3ä¸ªæœˆ
  - ä»… minor å˜æ›´å¯èƒ½

#### ğŸŸ  Alpha (é¢„è§ˆ)
- **å®šä¹‰**: åŠŸèƒ½åŸå‹ï¼ŒAPI å¯èƒ½å˜æ›´
- **æ ‡å‡†**:
  - æ ¸å¿ƒåŠŸèƒ½å¯ç”¨
  - åŸºç¡€æµ‹è¯•è¦†ç›–
  - API è®¾è®¡å¯èƒ½è°ƒæ•´
  - å®éªŒæ€§åŠŸèƒ½

#### ğŸ”´ Experimental (å®éªŒ)
- **å®šä¹‰**: æ¦‚å¿µéªŒè¯ï¼Œä¸ä¿è¯ç¨³å®šæ€§
- **æ ‡å‡†**:
  - åŠŸèƒ½ä¸å®Œæ•´
  - å¯èƒ½éšæ—¶å˜æ›´æˆ–ç§»é™¤
  - ä»…ä¾›è¯•éªŒä½¿ç”¨

### 2. æ ‡æ³¨å®ç°

#### 2.1 ä»£ç æ ‡æ³¨
```rust
/// æ¶ˆæ¯å‘é€æœåŠ¡ - ç¨³å®šç‰ˆæœ¬
/// 
/// # æˆç†Ÿåº¦
/// ğŸŸ¢ **Stable** - ç”Ÿäº§å¯ç”¨ï¼Œå‘åå…¼å®¹ä¿è¯
/// 
/// # ç‰ˆæœ¬ä¿¡æ¯
/// - å½“å‰ç‰ˆæœ¬: v2
/// - æ”¯æŒçŠ¶æ€: æ´»è·ƒç»´æŠ¤
/// - å¼ƒç”¨è®¡åˆ’: æ— 
#[stability(Stable)]
pub struct MessageService {
    // ...
}

/// æ–‡æ¡£åä½œåŠŸèƒ½ - æµ‹è¯•ç‰ˆæœ¬
/// 
/// # æˆç†Ÿåº¦  
/// ğŸŸ¡ **Beta** - åŠŸèƒ½å®Œæ•´ï¼ŒAPI å¯èƒ½å¾®è°ƒ
/// 
/// # æ³¨æ„äº‹é¡¹
/// - API åœ¨ v1.0 å‰å¯èƒ½æœ‰ minor å˜æ›´
/// - å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨
#[stability(Beta)]
pub struct CollaborationService {
    // ...
}
```

#### 2.2 æ–‡æ¡£æ ‡æ³¨
```markdown
## create_message API

### æˆç†Ÿåº¦: ğŸŸ¢ Stable
- **ç‰ˆæœ¬**: v2  
- **çŠ¶æ€**: ç”Ÿäº§å¯ç”¨
- **å…¼å®¹æ€§**: å‘åå…¼å®¹ä¿è¯
- **æµ‹è¯•è¦†ç›–**: 95%
```

---

## ğŸ“Š å½“å‰æ¨¡å—æˆç†Ÿåº¦è¯„ä¼°

### æ ¸å¿ƒæ¨¡å— (Core)

| æ¨¡å— | ç‰ˆæœ¬ | æˆç†Ÿåº¦ | æµ‹è¯•è¦†ç›– | å»ºè®® |
|------|------|---------|----------|------|
| **im** | v1/v2 | ğŸŸ¢ Stable | 85%* | ç”Ÿäº§å¯ç”¨ |
| **authentication** | v1 | ğŸŸ¢ Stable | 90%* | ç”Ÿäº§å¯ç”¨ |
| **contact** | v3 | ğŸŸ¡ Beta | 60%* | æµ‹è¯•ç¯å¢ƒ |
| **group** | v1 | ğŸŸ¡ Beta | 55%* | æµ‹è¯•ç¯å¢ƒ |

*é¢„ä¼°å€¼ï¼ŒåŸºäºæ–°å¢æµ‹è¯•

### äº‘æ–‡æ¡£æ¨¡å— (Cloud Docs)

| æ¨¡å— | ç‰ˆæœ¬ | æˆç†Ÿåº¦ | æµ‹è¯•è¦†ç›– | å»ºè®® |
|------|------|---------|----------|------|
| **drive** | v1/v2 | ğŸŸ¡ Beta | 45%* | éœ€è¦æ›´å¤šæµ‹è¯• |
| **sheets** | v2/v3 | ğŸŸ  Alpha | 30%* | v3 éœ€è¦éªŒè¯ |
| **bitable** | v1 | ğŸŸ¡ Beta | 50%* | åŠŸèƒ½å®Œæ•´ |
| **wiki** | v2 | ğŸŸ  Alpha | 35%* | è¾ƒæ–°åŠŸèƒ½ |

### ä¼ä¸šæœåŠ¡æ¨¡å—

| æ¨¡å— | ç‰ˆæœ¬ | æˆç†Ÿåº¦ | æµ‹è¯•è¦†ç›– | å»ºè®® |
|------|------|---------|----------|------|
| **attendance** | v1 | ğŸŸ¡ Beta | 40%* | ä¼ä¸šçº§éªŒè¯ |
| **approval** | v4 | ğŸŸ  Alpha | 25%* | API è¾ƒæ–° |
| **hire** | v1 | ğŸŸ  Alpha | 30%* | åŠŸèƒ½æ¼”è¿›ä¸­ |
| **calendar** | v4 | ğŸŸ  Alpha | 20%* | ç‰ˆæœ¬è¾ƒæ–° |

---

## ğŸ”„ è¿ç§»æŒ‡å—

### 1. ç‰ˆæœ¬å‡çº§è·¯å¾„

#### 1.1 ä» v1 åˆ° v2 (IM)
```rust
// æ—§ç‰ˆæœ¬ (v1)
use open_lark::service::im::v1::Message;
let request = CreateMessageRequest::new();

// æ–°ç‰ˆæœ¬ (v2) - æ¨è
use open_lark::service::im::v2::Message; 
let request = CreateMessageRequest::builder()
    .receive_id("user_id")
    .build();
```

#### 1.2 è‡ªåŠ¨åŒ–è¿ç§»
```bash
# ä½¿ç”¨è¿ç§»å·¥å…· (è®¡åˆ’ä¸­)
cargo lark migrate --from=v1 --to=v2 --module=im
```

### 2. å…¼å®¹æ€§ä¿è¯

#### 2.1 å‘åå…¼å®¹æ‰¿è¯º
- ğŸŸ¢ Stable API: ä¸¥æ ¼å‘åå…¼å®¹
- ğŸŸ¡ Beta API: minor å˜æ›´å¯èƒ½ï¼Œæå‰é€šçŸ¥
- ğŸŸ  Alpha API: å¯èƒ½ä¸å…¼å®¹å˜æ›´
- ğŸ”´ Experimental: æ— å…¼å®¹æ€§ä¿è¯

#### 2.2 ç ´åæ€§å˜æ›´å¤„ç†
1. **æå‰é€šçŸ¥** (6ä¸ªæœˆ)
2. **è¿‡æ¸¡æœŸæ”¯æŒ** (3ä¸ªæœˆ)
3. **è¿ç§»å·¥å…·æä¾›** 
4. **è¯¦ç»†è¿ç§»æ–‡æ¡£**

---

## ğŸ“ˆ è´¨é‡æå‡è®¡åˆ’

### é˜¶æ®µ 1: ç¨³å®šåŒ– (2-4å‘¨)
- [ ] æ ¸å¿ƒæ¨¡å—æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] Beta æ¨¡å—æµ‹è¯•è¦†ç›–ç‡ > 60%
- [ ] æ ‡æ³¨æ‰€æœ‰æ¨¡å—æˆç†Ÿåº¦ç­‰çº§

### é˜¶æ®µ 2: æ ‡å‡†åŒ– (4-6å‘¨)  
- [ ] ç»Ÿä¸€ API è®¾è®¡æ¨¡å¼
- [ ] Builder æ¨¡å¼è¦†ç›–ç‡ > 90%
- [ ] é”™è¯¯å¤„ç†æ ‡å‡†åŒ–

### é˜¶æ®µ 3: ä¼˜åŒ– (6-8å‘¨)
- [ ] æ€§èƒ½åŸºå‡†å»ºç«‹
- [ ] è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·
- [ ] å®Œæ•´çš„å…¼å®¹æ€§æµ‹è¯•

---

## ğŸ› ï¸ å®æ–½å·¥å…·

### 1. è‡ªåŠ¨åŒ–æ£€æŸ¥
```rust
#[macro_use]
mod stability_check {
    // ç¼–è¯‘æ—¶æ£€æŸ¥æˆç†Ÿåº¦æ ‡æ³¨
    // è¿è¡Œæ—¶éªŒè¯å…¼å®¹æ€§
}
```

### 2. CI/CD é›†æˆ
```yaml
# .github/workflows/stability.yml
- name: API Stability Check
  run: cargo run --bin stability_checker
  
- name: Compatibility Test  
  run: cargo test --test compatibility
```

### 3. å¼€å‘è€…å·¥å…·
```bash
# æ£€æŸ¥æ¨¡å—æˆç†Ÿåº¦
cargo lark stability --module=im

# å…¼å®¹æ€§æµ‹è¯•
cargo lark compat-test --from=v1 --to=v2
```

---

## ğŸ“ æ€»ç»“

é€šè¿‡å®æ–½ç»Ÿä¸€çš„ç‰ˆæœ¬æ¼”è¿›ç­–ç•¥å’Œæˆç†Ÿåº¦æ ‡æ³¨ç³»ç»Ÿï¼Œopen-lark SDK å°†ï¼š

1. **æé«˜ç¨³å®šæ€§** - æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
2. **é™ä½è¿ç§»æˆæœ¬** - è‡ªåŠ¨åŒ–å·¥å…·å’Œæ¸…æ™°æŒ‡å—
3. **å¢å¼ºä¿¡å¿ƒ** - é€æ˜çš„æˆç†Ÿåº¦ä¿¡æ¯
4. **ä¿è¯è´¨é‡** - åŸºäºæµ‹è¯•è¦†ç›–çš„åˆ†çº§

è¿™å°†ç¡®ä¿ open-lark æˆä¸ºä¼ä¸šçº§ Rust ç”Ÿæ€ç³»ç»Ÿä¸­æœ€å¯é çš„é£ä¹¦ SDKã€‚