[package]
name = "openlark-client"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "现代化飞书开放平台 Rust SDK - 简化客户端，支持功能驱动的模块化编译"

[dependencies]
# Core dependencies
openlark-core = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
async-trait = { workspace = true }
tokio = { workspace = true }
tracing = { workspace = true }
thiserror = { workspace = true }

# Additional dependencies for unified client
chrono = { workspace = true, features = ["serde"] }
uuid = { workspace = true, features = ["v4"] }

# WebSocket dependencies
tokio-tungstenite = { workspace = true, optional = true }
futures-util = { workspace = true, optional = true }
lark-websocket-protobuf = { workspace = true, optional = true }
url = { workspace = true, optional = true }
prost = { workspace = true, optional = true }
reqwest = { workspace = true, optional = true }
log = { workspace = true, optional = true }

# Optional service dependencies (conditionally included based on feature flags)
openlark-communication = { workspace = true, optional = true }
openlark-hr = { workspace = true, optional = true }
openlark-docs = { workspace = true, optional = true }
openlark-ai = { workspace = true, optional = true }
openlark-auth = { workspace = true, optional = true }

# Additional service crates - 暂时移除有循环依赖的 crates
# openlark-admin = { workspace = true, optional = true }
# openlark-approval = { workspace = true, optional = true }
# openlark-collab = { workspace = true, optional = true }
# openlark-helpdesk = { workspace = true, optional = true }
# openlark-hire = { workspace = true, optional = true }
# openlark-people = { workspace = true, optional = true }

[features]
default = ["auth"]

# Core client feature
client = []

# WebSocket support
websocket = ["tokio-tungstenite", "futures-util", "lark-websocket-protobuf", "url", "prost", "reqwest", "log"]

# Business service features - 基于 crates.md 中的真实 crates
# admin = ["openlark-admin"]                    # 管理和行政功能 (暂时禁用 - 循环依赖)
# approval = ["openlark-approval"]              # 审批流程 (暂时禁用 - 循环依赖)
auth = ["openlark-auth"]                      # 认证和授权（默认启用）
# collab = ["openlark-collab"]                  # 协作功能（日历、会议、任务等）(暂时禁用 - 循环依赖)
communication = ["openlark-communication"]    # 通讯和消息
# helpdesk = ["openlark-helpdesk"]              # 帮助台和搜索 (暂时禁用 - 循环依赖)
# hire = ["openlark-hire"]                      # 招聘管理 (暂时禁用 - 循环依赖)
hr = ["openlark-hr"]                          # 人力资源
ai = ["openlark-ai"]                          # AI 和智能服务
# people = ["openlark-people"]                  # 人员和联系人管理 (暂时禁用 - 循环依赖)

docs = ["openlark-docs"]                    # 文档和知识库

# Convenience features - 基础功能组合 (只包含无循环依赖的服务)
all-services = [
    "auth", "communication", "hr", "ai", "docs"
    # 暂时不包含有循环依赖的服务: admin, approval, collab, helpdesk, hire, people
]

# Complete client features for easy selection (只包含无循环依赖的服务)
# client-admin = ["client", "admin"]
# client-approval = ["client", "approval"]
client-auth = ["client", "auth"]
# client-collab = ["client", "collab"]
client-communication = ["client", "communication"]
# client-helpdesk = ["client", "helpdesk"]
# client-hire = ["client", "hire"]
client-hr = ["client", "hr"]
client-ai = ["client", "ai"]
# client-people = ["client", "people"]
client-all = ["client", "all-services"]
