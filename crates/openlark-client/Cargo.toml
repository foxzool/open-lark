[package]
name = "openlark-client"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "现代化飞书开放平台 Rust SDK - 简化客户端，支持功能驱动的模块化编译"

[dependencies]
# Core dependencies
openlark-core = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
async-trait = { workspace = true }
tokio = { workspace = true }
tracing = { workspace = true }
thiserror = { workspace = true }

# Additional dependencies for unified client
chrono = { workspace = true, features = ["serde"] }
uuid = { workspace = true, features = ["v4"] }

# WebSocket dependencies
tokio-tungstenite = { workspace = true, optional = true }
futures-util = { workspace = true, optional = true }
lark-websocket-protobuf = { workspace = true, optional = true }
url = { workspace = true, optional = true }
prost = { workspace = true, optional = true }
reqwest = { workspace = true, optional = true }
log = { workspace = true, optional = true }

# Optional service dependencies (conditionally included based on feature flags)
openlark-communication = { workspace = true, optional = true }
openlark-hr = { workspace = true, optional = true }
# openlark-docs = { workspace = true, optional = true } # 暂时移除 - 需要完成 legacy_client 迁移
openlark-ai = { workspace = true, optional = true }
openlark-auth = { workspace = true, optional = true }

[features]
default = []

# Core client feature
client = []

# WebSocket support
websocket = ["tokio-tungstenite", "futures-util", "lark-websocket-protobuf", "url", "prost", "reqwest", "log"]

# Feature flags for service inclusion
# 与新的 openlark-docs feature 分类同步
# docs = ["openlark-docs/ccm-doc"] # 暂时移除 - 需要完成 legacy_client 迁移
# sheets = ["openlark-docs/ccm-sheets"] # 暂时移除 - 需要完成 legacy_client 迁移
# bitable = ["openlark-docs/bitable"] # 暂时移除 - 需要完成 legacy_client 迁移
# wiki = ["openlark-docs/ccm-wiki"] # 暂时移除 - 需要完成 legacy_client 迁移
# drive = ["openlark-docs/ccm-drive"] # 暂时移除 - 需要完成 legacy_client 迁移
# ccm = ["openlark-docs/ccm"] # 暂时移除 - 需要完成 legacy_client 迁移
# cloud-docs = ["openlark-docs/cloud-docs"] # 暂时移除 - 需要完成 legacy_client 迁移

# 新的标准化特性名
# ccm-doc = ["openlark-docs/ccm-doc"] # 暂时移除 - 需要完成 legacy_client 迁移
# ccm-sheets = ["openlark-docs/ccm-sheets"] # 暂时移除 - 需要完成 legacy_client 迁移
# ccm-wiki = ["openlark-docs/ccm-wiki"] # 暂时移除 - 需要完成 legacy_client 迁移
# ccm-drive = ["openlark-docs/ccm-drive"] # 暂时移除 - 需要完成 legacy_client 迁移

# 独立服务特性
communication = ["openlark-communication"]
hr = ["openlark-hr"]
ai = ["openlark-ai"]
auth = ["openlark-auth"]

# Convenience features
all-services = ["hr", "ai", "auth"] # 暂时移除 docs 相关功能 - 需要完成 legacy_client 迁移
base-services = ["auth"] # 暂时移除 docs, sheets - 需要完成 legacy_client 迁移

# WebSocket features (disabled temporarily)
# websocket = ["tokio-tungstenite", "futures-util"]

# Complete client features for easy selection
# client-docs = ["client", "docs"] # 暂时移除 - 需要完成 legacy_client 迁移
client-hr = ["client", "hr"]
client-ai = ["client", "ai"]
client-auth = ["client", "auth"]
client-all = ["client", "all-services"]
# client-websocket = ["client", "websocket"]
