//! äº‹ä»¶å¤„ç†æ¨¡å—
//!
//! æä¾›é£ä¹¦å¼€æ”¾å¹³å°äº‹ä»¶çš„æ¥æ”¶ã€å¤„ç†å’Œåˆ†å‘åŠŸèƒ½ã€‚
//! æ”¯æŒWebSocketé•¿è¿æ¥å’ŒHTTPå›è°ƒä¸¤ç§äº‹ä»¶æ¥æ”¶æ–¹å¼ã€‚
//!
//! # ä¸»è¦ç»„ä»¶
//!
//! - **dispatcher**: äº‹ä»¶åˆ†å‘å™¨ï¼Œç”¨äºæ³¨å†Œå’Œå¤„ç†å„ç§ç±»å‹çš„äº‹ä»¶
//! - **context**: äº‹ä»¶ä¸Šä¸‹æ–‡ï¼Œæä¾›äº‹ä»¶å¤„ç†æ—¶çš„ç¯å¢ƒä¿¡æ¯
//!
//! # æ”¯æŒçš„äº‹ä»¶ç±»å‹
//!
//! - ğŸ“¨ æ¶ˆæ¯æ¥æ”¶äº‹ä»¶
//! - ğŸ‘€ æ¶ˆæ¯å·²è¯»äº‹ä»¶
//! - ğŸ‘¥ ç¾¤èŠæˆå‘˜å˜æ›´äº‹ä»¶
//! - ğŸ“ è§†é¢‘ä¼šè®®äº‹ä»¶
//! - ğŸ—“ï¸ æ—¥å†äº‹ä»¶
//! - ğŸ“‹ å®¡æ‰¹äº‹ä»¶
//! - æ›´å¤šäº‹ä»¶ç±»å‹æŒç»­æ·»åŠ ä¸­
//!
//! # å¿«é€Ÿå¼€å§‹
//!
//! ```no_run
//! use open_lark::event::dispatcher::EventDispatcherHandler;
//!
//! // åˆ›å»ºäº‹ä»¶å¤„ç†å™¨
//! let handler = EventDispatcherHandler::builder()
//!     .register_p2_im_message_receive_v1(|event| {
//!         println!("æ”¶åˆ°æ¶ˆæ¯: {:?}", event.event.message);
//!     })?
//!     .build();
//!
//! // å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶
//! // handler.handle_event(event_data).await?;
//! # Ok::<(), Box<dyn std::error::Error>>(())
//! ```

/// äº‹ä»¶å¤„ç†å™¨trait
///
/// æ‰€æœ‰äº‹ä»¶å¤„ç†å™¨éƒ½éœ€è¦å®ç°æ­¤traitï¼Œç”¨äºå¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶æ•°æ®
pub trait EventHandler: Send + Sync {
    /// å¤„ç†äº‹ä»¶æ•°æ®
    ///
    /// # å‚æ•°
    ///
    /// * `payload` - äº‹ä»¶çš„åŸå§‹å­—èŠ‚æ•°æ®
    ///
    /// # è¿”å›å€¼
    ///
    /// è¿”å›å¤„ç†ç»“æœçš„Ok(())æˆ–é”™è¯¯ä¿¡æ¯
    fn handle(&self, payload: &[u8]) -> anyhow::Result<()>;
}

/// äº‹ä»¶ä¸Šä¸‹æ–‡ç›¸å…³
pub mod context;
/// äº‹ä»¶åˆ†å‘å™¨
pub mod dispatcher;
