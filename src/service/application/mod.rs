//! Â∫îÁî®ÁÆ°ÁêÜÔºàApplicationÔºâÊúçÂä°
//!
//! Êèê‰æõÈ£û‰π¶ÂºÄÊîæÂπ≥Âè∞Â∫îÁî®ÁÆ°ÁêÜÁöÑÂÆåÊï¥ÂäüËÉΩÈõÜÔºåÊîØÊåÅÂ∫îÁî®‰ø°ÊÅØÊü•ËØ¢„ÄÅÂ∫îÁî®ÂïÜÂ∫óÁÆ°ÁêÜ„ÄÅ
//! Â∫îÁî®‰ΩøÁî®ÁªüËÆ°„ÄÅÂ∫îÁî®ÂèçÈ¶àÁ≠â‰ºÅ‰∏öÁ∫ßÂ∫îÁî®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜËÉΩÂäõ„ÄÇ
//!
//! # Ê†∏ÂøÉÂäüËÉΩ
//!
//! ## Â∫îÁî®‰ø°ÊÅØÁÆ°ÁêÜ
//! - üì± Â∫îÁî®Âü∫Êú¨‰ø°ÊÅØÊü•ËØ¢ÂíåÊõ¥Êñ∞
//! - üîß Â∫îÁî®ÈÖçÁΩÆÂíåËÆæÁΩÆÁÆ°ÁêÜ
//! - üìä Â∫îÁî®ÁâàÊú¨ÂíåÂèëÂ∏ÉÁÆ°ÁêÜ
//! - üè∑Ô∏è Â∫îÁî®ÂàÜÁ±ªÂíåÊ†áÁ≠æÁÆ°ÁêÜ
//! - üîê Â∫îÁî®ÊùÉÈôêÂíåÊéàÊùÉÁÆ°ÁêÜ
//!
//! ## Â∫îÁî®ÂïÜÂ∫óÁÆ°ÁêÜ
//! - üè™ Â∫îÁî®ÂïÜÂ∫ó‰ø°ÊÅØÂíå‰ªòË¥π‰ø°ÊÅØ
//! - üí∞ Â∫îÁî®ÂÆö‰ª∑ÂíåËÆ°Ë¥πÊ®°Âºè
//! - üìà Â∫îÁî®‰∏ãËΩΩÂíåÂÆâË£ÖÁªüËÆ°
//! - ‚≠ê Â∫îÁî®ËØÑÂàÜÂíåËØÑ‰ª∑ÁÆ°ÁêÜ
//! - üéØ Â∫îÁî®Êé®ÂπøÂíåËê•ÈîÄ
//!
//! ## Â∫îÁî®‰ΩøÁî®ÁªüËÆ°
//! - üìä Â∫îÁî®‰ΩøÁî®Êï∞ÊçÆÂíåÊåáÊ†á
//! - üë• Áî®Êà∑Ê¥ªË∑ÉÂ∫¶ÂíåÁïôÂ≠òÁéá
//! - üìà ÂäüËÉΩ‰ΩøÁî®ÊÉÖÂÜµÁªüËÆ°
//! - üîç Áî®Êà∑Ë°å‰∏∫ÂàÜÊûê
//! - üìã Êï∞ÊçÆÊä•Ë°®ÂíåÂØºÂá∫
//!
//! ## Â∫îÁî®ÂèçÈ¶àÁÆ°ÁêÜ
//! - üí¨ Áî®Êà∑ÂèçÈ¶àÊî∂ÈõÜÂíåÁÆ°ÁêÜ
//! - üêõ ÈóÆÈ¢òÂèçÈ¶àÂíåBugË∑üË∏™
//! - ‚≠ê Áî®Êà∑ËØÑ‰ª∑ÂíåÂª∫ËÆÆ
//! - üìû ÂÆ¢Êà∑ÊîØÊåÅÂíåÊúçÂä°
//! - üîÑ ÂèçÈ¶àÂ§ÑÁêÜÊµÅÁ®ã
//!
//! ## Â∫îÁî®ÂæΩÁ´†Á≥ªÁªü
//! - üèÜ Â∫îÁî®ÂæΩÁ´†ËÆæËÆ°ÂíåÁÆ°ÁêÜ
//! - üéñÔ∏è ÂæΩÁ´†Êéà‰∫àÂíåÊí§ÈîÄ
//! - üìä ÂæΩÁ´†ÁªüËÆ°ÂíåÂàÜÊûê
//! - üéØ ÂæΩÁ´†ÊøÄÂä±Êú∫Âà∂
//!
//! ## ÁÆ°ÁêÜÂëòÂäüËÉΩ
//! - üëë ÁÆ°ÁêÜÂëòÊùÉÈôêÂíåËßíËâ≤
//! - üîß Â∫îÁî®ÂÆ°Ê†∏ÂíåÂÆ°Êâπ
//! - üìã Â∫îÁî®ÁõëÊéßÂíåÁÆ°ÁêÜ
//! - üö´ Â∫îÁî®Á¶ÅÁî®ÂíåÊÅ¢Â§ç
//! - üìä Âπ≥Âè∞ËøêËê•Êï∞ÊçÆ
//!
//! # ‰ΩøÁî®Á§∫‰æã
//!
//! ```rust
//! use open_lark::prelude::*;
//!
//! let client = LarkClient::builder("app_id", "app_secret")
//!     .with_app_type(AppType::SelfBuild)
//!     .build();
//!
//! // Ëé∑ÂèñÂ∫îÁî®ÁÆ°ÁêÜÊúçÂä°
//! let app = &client.application;
//!
//! // Ëé∑ÂèñÂ∫îÁî®‰ø°ÊÅØ
//! // let app_request = GetApplicationRequest::builder()
//! //     .app_id("app_id")
//! //     .build();
//! // let app_info = app.v6.application.get(app_request, None).await?;
//!
//! // Êü•ËØ¢Â∫îÁî®‰ΩøÁî®ÁªüËÆ°
//! // let usage_request = GetAppUsageRequest::builder()
//! //     .app_id("app_id")
//! //     .date_range("2024-01-01,2024-01-31")
//! //     .build();
//! // let usage_data = app.v6.app_usage.get(usage_request, None).await?;
//!
//! // ÂàõÂª∫Â∫îÁî®ÂæΩÁ´†
//! // let badge_request = CreateAppBadgeRequest::builder()
//! //     .name("Êñ∞ÊâãÂÖ•Èó®")
//! //     .description("ÂÆåÊàêÂ∫îÁî®Âü∫Á°ÄÈÖçÁΩÆ")
//! //     .icon_url("https://example.com/badge.png")
//! //     .build();
//! // app.v6.app_badge.create(badge_request, None).await?;
//!
//! // Êèê‰∫§Â∫îÁî®ÂèçÈ¶à
//! // let feedback_request = CreateFeedbackRequest::builder()
//! //     .app_id("app_id")
//! //     .feedback_type("feature_request")
//! //     .content("Â∏åÊúõÂ¢ûÂä†Êõ¥Â§öËá™ÂÆö‰πâÈÄâÈ°π")
//! //     .build();
//! // app.v6.application_feedback.create(feedback_request, None).await?;
//! ```
//!
//! # APIÁâàÊú¨
//!
//! ÂΩìÂâçÊîØÊåÅv6ÁâàÊú¨ÔºåÊòØÊúÄÊñ∞ÁöÑÁ®≥ÂÆöÁâàÊú¨ÔºåÊèê‰æõÔºö
//! - ÂÆåÊï¥ÁöÑÂ∫îÁî®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ
//! - ‰∏∞ÂØåÁöÑÁªüËÆ°ÂíåÂàÜÊûêÂäüËÉΩ
//! - Âº∫Â§ßÁöÑÂïÜÂ∫óÂíåËê•ÈîÄËÉΩÂäõ
//! - ÂÆåÂñÑÁöÑÂèçÈ¶àÂíåÊîØÊåÅÁ≥ªÁªü
//!
//! # Â∫îÁî®ÁÆ°ÁêÜÁâπÊÄß
//!
//! - üìà ÂÆûÊó∂Êï∞ÊçÆÁõëÊéßÂíåÂàÜÊûê
//! - üîÑ Ëá™Âä®ÂåñËøêËê•ÂíåÁÆ°ÁêÜ
//! - üéØ Á≤æÂáÜÁî®Êà∑Áæ§‰ΩìÂÆö‰Ωç
//! - üí° Êô∫ËÉΩÊé®ËçêÂíå‰ºòÂåñÂª∫ËÆÆ
//! - üîê ‰ºÅ‰∏öÁ∫ßÂÆâÂÖ®ÂíåÂêàËßÑ
//!
//! # ÂïÜ‰∏öÂåñËÉΩÂäõ
//!
//! - üí∞ ÁÅµÊ¥ªÁöÑÂÆö‰ª∑ÂíåËÆ°Ë¥πÊ®°Âºè
//! - üìä Êî∂ÂÖ•ÁªüËÆ°ÂíåË¥¢Âä°ÁÆ°ÁêÜ
//! - üéØ Á≤æÂáÜËê•ÈîÄÂíåÊé®Âπø
//! - üìà ÂïÜ‰∏öÊï∞ÊçÆÂàÜÊûêÂíåÊ¥ûÂØü
//! - ü§ù Âêà‰Ωú‰ºô‰º¥ÁîüÊÄÅÁ≥ªÁªü

/// Êï∞ÊçÆÊ®°ÂûãÂÆö‰πâ
pub mod models;
/// Â∫îÁî®ÁÆ°ÁêÜÊúçÂä° v6 ÁâàÊú¨
pub mod v6;

use crate::core::config::Config;

/// Â∫îÁî®ÁÆ°ÁêÜÊúçÂä°
///
/// ‰ºÅ‰∏öÁ∫ßÂ∫îÁî®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÁöÑÁªü‰∏ÄÂÖ•Âè£ÔºåÊèê‰æõÂ∫îÁî®‰ø°ÊÅØÁÆ°ÁêÜ„ÄÅÂïÜÂ∫óËøêËê•„ÄÅ
/// Êï∞ÊçÆÁªüËÆ°„ÄÅÁî®Êà∑ÂèçÈ¶àÁ≠âÂÆåÊï¥ÁöÑÂ∫îÁî®ÁÆ°ÁêÜËÉΩÂäõ„ÄÇ
///
/// # ÊúçÂä°Êû∂ÊûÑ
///
/// - **v6**: ÊúÄÊñ∞ÁâàÊú¨APIÔºåÊèê‰æõÂÆåÊï¥ÁöÑÂ∫îÁî®ÁÆ°ÁêÜÂäüËÉΩÈõÜ
/// - **models**: Êï∞ÊçÆÊ®°ÂûãÂíåÁªìÊûÑÂÆö‰πâ
///
/// # Ê†∏ÂøÉÁâπÊÄß
///
/// - üì± ÂÆåÊï¥ÁöÑÂ∫îÁî®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ
/// - üìä Ê∑±Â∫¶ÁöÑÊï∞ÊçÆÂàÜÊûêÂíåÊ¥ûÂØü
/// - üè™ ‰∏ì‰∏öÁöÑÂ∫îÁî®ÂïÜÂ∫óËøêËê•
/// - üí¨ ÂÆåÂñÑÁöÑÁî®Êà∑ÂèçÈ¶àÁ≥ªÁªü
/// - üéØ Êô∫ËÉΩÁöÑËê•ÈîÄÂíåÊé®ÂπøÂ∑•ÂÖ∑
///
/// # ÈÄÇÁî®Âú∫ÊôØ
///
/// - ‰ºÅ‰∏öÂ∫îÁî®ÂºÄÂèëÂíåËøêËê•
/// - Â∫îÁî®ÂïÜÂ∫óÁÆ°ÁêÜÂíåËê•ÈîÄ
/// - Áî®Êà∑‰ΩìÈ™å‰ºòÂåñÂíåÊîπËøõ
/// - Êï∞ÊçÆÈ©±Âä®ÁöÑ‰∫ßÂìÅÂÜ≥Á≠ñ
/// - Â∫îÁî®ÁîüÊÄÅÁ≥ªÁªüÂª∫ËÆæ
///
/// # ÊúÄ‰Ω≥ÂÆûË∑µ
///
/// - ÂÆöÊúüÂàÜÊûêÂ∫îÁî®‰ΩøÁî®Êï∞ÊçÆ
/// - ÁßØÊûÅÊî∂ÈõÜÂíåÂ§ÑÁêÜÁî®Êà∑ÂèçÈ¶à
/// - ÊåÅÁª≠‰ºòÂåñÂ∫îÁî®ÊÄßËÉΩÂíå‰ΩìÈ™å
/// - ÂêàÁêÜËÆæËÆ°Â∫îÁî®ÂïÜ‰∏öÊ®°Âºè
/// - Âª∫Á´ãÂÆåÂñÑÁöÑËøêËê•ÊµÅÁ®ã
pub struct ApplicationService {
    /// v6ÁâàÊú¨APIÊúçÂä°
    pub v6: v6::V6,
}

impl ApplicationService {
    /// ÂàõÂª∫Êñ∞ÁöÑÂ∫îÁî®ÁÆ°ÁêÜÊúçÂä°ÂÆû‰æã
    ///
    /// # ÂèÇÊï∞
    /// - `config`: ÂÆ¢Êà∑Á´ØÈÖçÁΩÆÔºåÂåÖÂê´ËÆ§ËØÅ‰ø°ÊÅØÂíåAPIËÆæÁΩÆ
    ///
    /// # ËøîÂõûÂÄº
    /// ÈÖçÁΩÆÂÆåÊàêÁöÑÂ∫îÁî®ÁÆ°ÁêÜÊúçÂä°ÂÆû‰æã
    pub fn new(config: Config) -> Self {
        Self {
            v6: v6::V6::new(config),
        }
    }

    /// ‰ΩøÁî®ÂÖ±‰∫´ÈÖçÁΩÆÂàõÂª∫ÊúçÂä°ÔºàÂÆûÈ™åÊÄßÔºâ
    pub fn new_from_shared(shared: std::sync::Arc<Config>) -> Self {
        Self {
            v6: v6::V6::new(shared.as_ref().clone()),
        }
    }
}

#[cfg(test)]
mod tests {
    use super::*;
    use std::time::Duration;

    #[test]
    fn test_application_service_creation() {
        let config = Config::default();
        let service = ApplicationService::new(config);

        // Verify V6 service structure exists
        let _ = &service.v6;
        let _ = &service.v6.application;
        let _ = &service.v6.scope;
        let _ = &service.v6.admin;
        let _ = &service.v6.appstore_paid_info;
        let _ = &service.v6.app_usage;
        let _ = &service.v6.application_feedback;
        let _ = &service.v6.app_badge;
    }

    #[test]
    fn test_application_service_with_custom_config() {
        let config = Config::builder()
            .app_id("application_test_app")
            .app_secret("application_test_secret")
            .req_timeout(Duration::from_secs(300))
            .build();

        let service = ApplicationService::new(config);

        // Verify service creation with custom config
        let _ = &service.v6.application;
        let _ = &service.v6.scope;
        let _ = &service.v6.admin;
        let _ = &service.v6.appstore_paid_info;
        let _ = &service.v6.app_usage;
        let _ = &service.v6.application_feedback;
        let _ = &service.v6.app_badge;
    }

    #[test]
    fn test_application_service_config_independence() {
        let config1 = Config::builder().app_id("application_app_1").build();

        let config2 = Config::builder().app_id("application_app_2").build();

        let service1 = ApplicationService::new(config1);
        let service2 = ApplicationService::new(config2);

        // Verify both services are created successfully
        let _ = &service1.v6.application;
        let _ = &service1.v6.scope;
        let _ = &service2.v6.application;
        let _ = &service2.v6.scope;
    }

    #[test]
    fn test_application_service_sub_services_accessible() {
        let config = Config::default();
        let service = ApplicationService::new(config);

        // Test that all sub-services are accessible
        let _ = &service.v6.application;
        let _ = &service.v6.scope;
        let _ = &service.v6.admin;
        let _ = &service.v6.appstore_paid_info;
        let _ = &service.v6.app_usage;
        let _ = &service.v6.application_feedback;
        let _ = &service.v6.app_badge;
    }

    #[test]
    fn test_application_service_config_cloning() {
        let config = Config::builder()
            .app_id("clone_test_app")
            .app_secret("clone_test_secret")
            .build();

        let service = ApplicationService::new(config.clone());

        // Verify service creation with cloned config
        let _ = &service.v6.application;
        let _ = &service.v6.scope;
        let _ = &service.v6.admin;
        let _ = &service.v6.appstore_paid_info;
        let _ = &service.v6.app_usage;
        let _ = &service.v6.application_feedback;
        let _ = &service.v6.app_badge;
    }

    #[test]
    fn test_application_service_timeout_propagation() {
        let config = Config::builder()
            .req_timeout(Duration::from_secs(310))
            .build();

        let service = ApplicationService::new(config);

        // Verify service creation with timeout config
        let _ = &service.v6.application;
        let _ = &service.v6.scope;
        let _ = &service.v6.admin;
        let _ = &service.v6.appstore_paid_info;
        let _ = &service.v6.app_usage;
        let _ = &service.v6.application_feedback;
        let _ = &service.v6.app_badge;
    }

    #[test]
    fn test_application_service_multiple_instances() {
        let config = Config::default();

        let service1 = ApplicationService::new(config.clone());
        let service2 = ApplicationService::new(config.clone());

        // Verify both instances are created successfully
        let _ = &service1.v6.application;
        let _ = &service1.v6.scope;
        let _ = &service2.v6.application;
        let _ = &service2.v6.scope;
    }

    #[test]
    fn test_application_service_config_consistency() {
        let config = Config::builder()
            .app_id("consistency_test")
            .app_secret("consistency_secret")
            .req_timeout(Duration::from_secs(200))
            .build();

        let service = ApplicationService::new(config);

        // Verify all sub-services are created consistently
        let _ = &service.v6.application;
        let _ = &service.v6.scope;
        let _ = &service.v6.admin;
        let _ = &service.v6.appstore_paid_info;
        let _ = &service.v6.app_usage;
        let _ = &service.v6.application_feedback;
        let _ = &service.v6.app_badge;
    }
}
